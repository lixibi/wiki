### 量化交易

##### 故善战者，立于不败之地，而不失敌之败也。---《孙子兵法》

在雪球注册快八个月了。在聚宽网注册也已经快满五个月了，它们都是非常好的投资者交流平台，在这里学到不少量化交易知识，并克隆了一些优秀的程序，更重要的是结识了一帮志同道合的朋友。

与朋友们的交流让我受益菲浅，但是也发现个别量化交易者在认识上的一些误区。在此，我结合自己近四年的量化交易经验，写点自己对它的看法，抛砖引玉，以文会友。

狭义的量化交易也称为程序化交易，它是指程序设计人员将交易策略用计算机程序实现，然后由计算机自动执行。简单的说，就是由计算机代替人来根据既定策略进行交易。

结合自己近四年的量化交易经历，我对于量化交易系统的设计与开发，提出以下几个方面的看法：

1、 交易策略的逻辑分析是量化交易系统的核心。也就是说，这一个系统在什么行情下盈利，在什么行情下亏损，是否存在严重亏损的可能，如何控制风险。这些问题是设计策略时首要考虑的，是重中之重，是顶层设计。必须用文字的形式写下来，并详细推敲。

2、 正确看待回测。对回测数据的分析，很多人关注的重点是年化收益和最大回撤率。其实更重要的应该是以下几方面：
- 交易次数，如果交易次数太少，那么这个回测数据可信度不高。
- 最大连续盈利区间以及最盈利的一笔交易，重点分析它为什么盈利，分析策略的盈利的来源，并分析这样的行情是否可能再次来临。
- 最大连续亏损区间以及亏损最严重的一笔交易，分析策略的亏损原因，并分析这样的行情是否可能再次发生，在什么情况下亏损会更糟糕。以及如何做好防范措施。
- 回测的目的不是为了证明交易策略多么优秀，盈利率如何的高，而是为了发现尽可能多的缺陷，包括程序的BUG和交易逻辑的不合理之处。

3、 别把量化交易神圣化。量化交易本质上是投资策略的程序化，量化交易系统本质上就是一个工具软件。从哲学上说，没有交易圣杯。任何策略都有利有弊，如同硬币的两个面，对立而统一。比如趋势跟踪适合大的趋势行情，但在一定幅度的横盘振荡行情上会遭受连续的亏损；而振荡策略虽然能在振荡行情中如鱼得水，但会在长期趋势行情下遭受亏损。未来的行情究竟适合哪一种策略，谁也不知道。

4、 过去不代表未来。策略回测的年化收益率参考意义不大（高频或者超高频策略除外）。过去盈利了，其主要原因是过去的行情走势正好与交易策略的盈利特性一致，而行情的走势在未来是否会再次以相同的幅度和时间周期出现，这个很难。虽然说投机像山岳那样古老，行情可能会重演，但绝对不会简单的重复。未来一切都是不可预知的。举个自己亲身经历的例子，我在2013年5月参照美国一个著名的交易策略开发了一个日内交易策略，测试了几个活跃品种后发现它在橡胶上表现优异，于是就实盘运行。最初它的表现让人非常满意，连续七个月都是盈利的，当时我觉得自己开发了一个“期货自动提款机”，每天早上启动程序，然后自己出门上班，非常省心还挣钱。然而从第八个月开始连续五个月亏损，最后只有把交易停了。后来夜盘出来后这个日内交易策略更失效了。

5、最后一点也是最重要一点，分散，尽可能分散。把资金分散到多个弱相关的品种上，每个品种分散到多个弱相关的策略上。交易与战争不一样，不能毕其功于一役。它是一个长期的过程，如同在险滩上行舟，小心行得万年船，哪怕曾经安全行使一万公里，一次掉以轻心都可能丧命。分散的目的就是保证自己即使在遇到极端不利的行情下最多只是受伤而不会毙命。风险控制永远是第一位的，无论曾经盈利多少个100%，只需要一次亏损100%就游戏结束了。2015年连续3次股灾，让多少账户灰飞烟灭？！投资市场向来不缺明星缺寿星，那些“投资明星”你方唱罢我登台，各领风骚一两年，如同烟花般眩目，如同爆竹般响亮；也如同烟花爆竹般短暂。每一个投资者都应该领会《孙子兵法》里的这一段：“昔之善战者，先为不可胜，以待敌之可胜。不可胜在己，可胜在敌。故善战者，能为不可胜，不能使敌之必可胜。故曰：胜可知，而不可为。” 唯有如此方能“自保而全胜也。”
